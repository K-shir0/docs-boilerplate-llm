# コミットメッセージの実例集

このドキュメントでは、良いコミットメッセージと悪いコミットメッセージの実例を紹介します。

## 既存コミットの改善例

### リポジトリの実際のコミット履歴からの変換

#### 例1: 機能追加
**変更前（既存のコミット）:**
```
add: sample section
```

**変更後（Conventional Commits準拠）:**
```
feat: サンプルセクションを追加
```

**改善点:**
- `add:` → `feat:` に統一
- 日本語での明確な説明

---

#### 例2: ドキュメント更新
**変更前（既存のコミット）:**
```
update: CLAUDE.md
```

**変更後（Conventional Commits準拠）:**
```
docs: CLAUDE.mdを更新
```

または、より具体的に：
```
docs: CLAUDE.mdにコーディング規則を追加
```

**改善点:**
- `update:` → `docs:` でドキュメント変更を明示
- 何を更新したかを具体的に記述（推奨）

---

#### 例3: スキル追加
**変更前（既存のコミット）:**
```
add: code-intelligence
```

**変更後（Conventional Commits準拠）:**
```
feat(skills): code-intelligenceスキルを追加
```

または本文付きで：
```
feat(skills): code-intelligenceスキルを追加

セマンティックコード検索とLSPベースのコード理解機能を提供。
リファクタリングタスクのサポートを含む。
```

**改善点:**
- scopeを使用してskills関連の変更を明示
- 本文で機能の詳細を説明

---

#### 例4: マークダウンガイドライン追加
**既存のコミット:**
```
feat: Add markdown writing guidelines skill
```

**改善後（日本語化）:**
```
feat(skills): マークダウン記述ガイドラインスキルを追加
```

**改善点:**
- 説明文を日本語に統一
- scopeを追加

---

## ユースケース別の実例

### 1. 新機能の追加

#### シンプルな例
```
feat: ユーザー検索機能を追加
```

#### スコープ付き
```
feat(auth): パスワードリセット機能を追加
```

#### 詳細な説明付き
```
feat: セマンティック検索機能を追加

ベクトルデータベースを使用した高度な検索機能を実装。
自然言語クエリに対応し、検索精度が大幅に向上。

実装内容:
- OpenAI APIを使用した埋め込み生成
- Pineconeベクトルストアとの統合
- 検索結果のランキングアルゴリズム
```

### 2. バグ修正

#### シンプルな例
```
fix: ログイン時の認証エラーを修正
```

#### Issue参照付き
```
fix: 日本語ファイル名のアップロードエラーを修正

Closes #45
```

#### 詳細な説明付き
```
fix: メモリリークの原因となるイベントリスナーを修正

コンポーネントのアンマウント時にイベントリスナーが
正しく削除されていなかった問題を修正。

影響範囲: UserProfile, SettingsPanel コンポーネント
```

### 3. ドキュメント

#### READMEの更新
```
docs: インストール手順を追加
```

#### APIドキュメント
```
docs(api): 認証エンドポイントのドキュメントを更新
```

#### 設計書の更新
```
docs: design.mdにデータベース設計を追加
```

### 4. リファクタリング

#### シンプルな例
```
refactor: 認証ロジックを整理
```

#### 詳細な説明付き
```
refactor: ユーザーサービスをクラスベースに書き換え

関数ベースの実装からクラスベースの実装に変更。
テスタビリティと保守性を向上。

変更内容:
- UserService クラスを作成
- 依存性注入パターンを導入
- エラーハンドリングを統一
```

### 5. テスト

#### 新規テスト追加
```
test: ユーザー認証のテストを追加
```

#### テスト修正
```
test: フラッキーなテストを修正
```

#### カバレッジ向上
```
test: エッジケースのテストを追加

境界値テストとエラーケースのテストを追加し、
カバレッジを85%から95%に向上。
```

### 6. スタイル・フォーマット

```
style: ESLint警告を修正
```

```
style: インデントを2スペースに統一
```

### 7. パフォーマンス改善

```
perf: データベースクエリを最適化
```

```
perf: 画像遅延読み込みを実装

Lazy loadingを実装し、初期ページロード時間を
3秒から1秒に短縮。
```

### 8. ビルド・CI/CD

```
build: webpackの設定を更新
```

```
ci: GitHub Actionsワークフローを追加
```

```
chore: 依存パッケージを最新版に更新
```

### 9. Breaking Changes

#### 簡易版
```
feat!: 認証APIをv2に移行
```

#### 詳細版
```
feat!: 認証APIをv2に移行

BREAKING CHANGE: /api/v1/auth エンドポイントは廃止されました。
新しい /api/v2/auth エンドポイントを使用してください。

移行ガイド:
- トークン形式がJWTに変更
- リフレッシュトークンが必須に
- レスポンス形式の変更

参考: docs/MIGRATION.md
```

### 10. Revert

```
revert: "feat: ユーザー検索機能を追加"

This reverts commit a1b2c3d4e5f6.

パフォーマンス問題により一時的に機能を削除。
```

## 悪い例と改善案

### ❌ 悪い例1: 説明が不明確
```
fix: バグ修正
```

### ✅ 改善案
```
fix: ログイン画面でのフォーム送信エラーを修正
```

---

### ❌ 悪い例2: typeが不適切
```
update: 新機能を追加
```

### ✅ 改善案
```
feat: ダークモード機能を追加
```

---

### ❌ 悪い例3: 複数の無関係な変更
```
feat: ログイン機能追加、設定画面更新、バグ修正
```

### ✅ 改善案（3つのコミットに分割）
```
feat: ログイン機能を追加
feat: 設定画面のUIを更新
fix: データ保存時のエラーを修正
```

---

### ❌ 悪い例4: 英語と日本語の混在（説明文）
```
feat: add user authentication
```

### ✅ 改善案
```
feat: ユーザー認証機能を追加
```

---

### ❌ 悪い例5: 不要な句点
```
docs: READMEを更新しました。
```

### ✅ 改善案
```
docs: READMEを更新
```

---

### ❌ 悪い例6: 曖昧な表現
```
refactor: コードをきれいにした
```

### ✅ 改善案
```
refactor: 認証ロジックの重複コードを削除
```

## Claude Codeでの使用例

### 例1: 新規ファイル作成時
```
feat(docs): コミットガイドラインスキルを追加

Conventional Commits準拠の日本語コミットメッセージ
作成をサポートするスキルを実装。

含まれるファイル:
- SKILL.md: スキルの概要
- resources/CONVENTIONS.md: 詳細な規則
- resources/EXAMPLES.md: 実例集
```

### 例2: バグ修正時
```
fix(skills): マークダウンスキルのフォーマットエラーを修正

見出しレベルが正しく認識されない問題を修正。
```

### 例3: ドキュメント更新時
```
docs: CLAUDE.mdにコミット規則のリンクを追加
```

### 例4: 設定ファイル更新時
```
chore(config): .gitignoreにログファイルを追加
```

## チートシート

### よく使うパターン

```bash
# 新機能
feat: [機能名]を追加
feat([scope]): [機能名]を追加

# バグ修正
fix: [問題]を修正
fix([scope]): [問題]を修正

# ドキュメント
docs: [ファイル名]を更新
docs: [ファイル名]に[内容]を追加

# リファクタリング
refactor: [対象]を整理
refactor: [対象]を[新しい方式]に書き換え

# テスト
test: [対象]のテストを追加
test: [問題のあったテスト]を修正

# スタイル
style: [問題]を修正
style: [規則]に統一

# パフォーマンス
perf: [対象]を最適化

# その他
chore: [依存関係/ツール]を更新
build: [ビルドツール]の設定を更新
ci: [CI/CDツール]の設定を追加
```

## まとめ

### 良いコミットメッセージの特徴

1. **明確性**: 何をしたかが一目で分かる
2. **簡潔性**: 必要十分な情報を含む
3. **一貫性**: プロジェクト全体で規則が統一されている
4. **文脈**: 必要に応じて背景や理由を説明
5. **トレーサビリティ**: 関連するIssueやPRを参照

### コミット前のチェックポイント

- [ ] 適切なtypeを選択したか
- [ ] 説明文は日本語で簡潔か
- [ ] 必要に応じてscopeを追加したか
- [ ] 複数の無関係な変更を含んでいないか
- [ ] Breaking Changesを明示したか（該当する場合）
- [ ] 関連するIssueを参照したか（該当する場合）
